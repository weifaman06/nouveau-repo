var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},VideoRichHoverHandler,VideoRichHover;typeof VideoRichHoverUtils!="undefined"&&typeof VideoRichHoverUtils.logJsModuleLoad=="function"&&VideoRichHoverUtils.logJsModuleLoad("VRHEH",!!_w.VideoRichHoverHandler),function(n){function uu(n,t){fr&&(!t||!t.bindInfos||t.bindInfos.length<1||(u[n]=t,t.abt==VRHEnums.AsyncBindType.Observe?fu(t):t.isAsyncBind&&sj_evt.bind(ki,eu),er=t.bh,at(t)))}function fu(n){var t;if(n&&(t=se(n),(t===null||t===void 0?void 0:t.length)>0)){var i={childList:!0,subtree:!0},r=function(t){for(var u,i=0,r=t;i<r.length;i++)u=r[i],u.type==="childList"&&at(n)},u=new MutationObserver(r);t.forEach(function(n){u.observe(n,i)})}}function eu(n){var t,i;if(n)if(t=null,n.length>1&&(t=n[1]),!t||t.length<1)for(i in u)at(u[i]?u[i]:null);else at(u[t]?u[t]:null)}function at(n){var o,e,u,s,h,c,r,l,f,t;if(n!=null&&(o=hr(n),o!=null&&!(o.length<1))){e=null;switch(n.hmte){case VRHEnums.HoverMouseTriggerEvent.MouseOver:e="mouseover";break;case VRHEnums.HoverMouseTriggerEvent.MouseMove:default:e="mousemove"}for(t=0;t<o.length;t++)if(u=o[t],u!==null&&u.elements!==null&&u.targetInfo!==null)for(s=u.targetInfo,h=0;h<u.elements.length;h++)if((c=u.elements[h],r=ui(c,s),r)&&(l=su(n),!hu(r)))switch(l){case VRHEnums.HoverPlayType.BackgroundPlay:r.setAttribute(et,null);break;case VRHEnums.HoverPlayType.HoverLoopPlay:r.setAttribute(bt,null);a(r,e,yf,!1,!1);or(r,c,n,s);break;case VRHEnums.HoverPlayType.HoverPlay:r.setAttribute(wt,null);a(r,e,af,!1,!1);or(r,c,n,s);break;case VRHEnums.HoverPlayType.Null:r.setAttribute(wt,null)}if(n.enHoverAsyncMeta&&(f=wu(n),f&&f.length>0))for(t=0;t<f.length;t++)f[t]&&(n.autoRetriveMetaMaxCount&&n.autoRetriveMetaMaxCount>0&&t<n.autoRetriveMetaMaxCount&&vt(f[t],null,null),a(f[t],e,lf,!1,!1));sj_evt.bind(i.HoverManualTriggerEvt,vf,!0);a(_w,"focus",ku,!0);er||a(_w,"blur",gu,!0);n.enAutoPlayOnLoad&&sj_evt.bind("onP1",ne,!0);switch(n.autoPlayType){case VRHEnums.AutoPlayType.OnVisibleWithAutoPlayNext:ri=!0;sj_evt.bind(i.PlayerEndEvt,ci);sj_evt.bind(i.PlayerErrEvt,ci);sj_evt.bind(i.FallbackToNonSMTEvt,ci);case VRHEnums.AutoPlayType.OnVisible:au();sj_evt.bind("onP1",kr);sj_be(_w,"scroll",kr)}}}function or(n,t,r,u){if(a(n,"touchstart",cf,!1,!1),a(n,"mousemove",fe,!1,!1),a(t,"mouseout",vr,!1,!1),r.entabhover===!0){var f=yu(n,u);f&&(ht(f,i.TabHoverBehaviorAttachedStr),a(f,"focus",du,!1,!1))}r.isBoundarySizePersisted&&t.setAttribute(i.BoundarySizePersistedAttachedStr,null);r.enBoundarySizeScale&&t.setAttribute(i.BoundarySizeScaleAttachedStr,null)}function vt(n,t,i){var v,y,f,s,c,l,e,p,a;if(n&&(f=b(n),f)){if(h(f,ot)&&h(f,rt)){t!=null&&i&&i(n,t);return}if(s=parseInt(r(f,ai)),isNaN(s)&&(s=1),!h(f,ot)&&s>0){if(c=(v=r(f,d))!==null&&v!==void 0?v:r(f,o+d),!c)return;if(l=u[c],!l||!l.metauf)return;if(e=sj_gx(),!e)return;gt(f,ot);e.onreadystatechange=function(){if(4==e.readyState){var r=ou(f,200==e.status?e.responseText:"");r?h(f,rt)&&t!=null&&i&&i(n,t,0):(s-=1,ht(f,ai,s),ni(f,ot),vt(n,t,i))}};p=(y=r(f,"mid"))!==null&&y!==void 0?y:r(f,o+"mid");p&&(a=gi(l.metauf,p),a=ur(a,_G.IG,iu+c,ru++),e.open("GET",a,!0),e.send(null))}}}function ou(n,t){var f,i,e,u;if(!n||!t)return!1;if(pt&&typeof VideoRichHoverTestUtils.removeInstLogIfPresent=="function"&&(t=VideoRichHoverTestUtils.removeInstLogIfPresent(t)),i="",s(n,l))i=l;else if(s(n,o+l))i=o+l;else return!1;if(e=r(n,i),!e||e!=t){u=null;try{if(u=JSON.parse(t),!u)return!1;ht(n,i,JSON.stringify((f=u.videoResult)!==null&&f!==void 0?f:u))}catch(h){return!1}return!0}return!1}function su(n){var t=VRHEnums.HoverPlayType.Null;return n.enBgPlay?t=VRHEnums.HoverPlayType.BackgroundPlay:n.enHoverControl&&(t=n.enLoopPlayOnHover?VRHEnums.HoverPlayType.HoverLoopPlay:VRHEnums.HoverPlayType.HoverPlay),t}function hu(n){return n==null?!0:r(n,wt)||r(n,et)||r(n,bt)}function cu(n){var t=Array(),c,r,f,i,o,h;for(c in u)r=u[c],r&&(n&&r.enAutoPlayOnLoad||r.enAutoPlayNext)&&(f=hr(r),f!=null&&f.length>0&&(t=t.concat(f)));if(t.length<1)return null;for(sj_evt.fire("VR.AP.List",t),i=0;i<t.length;i++){var l=t[i].targetInfo,e=t[i].elements,a=t[i].targetProperties;if(l!==null&&e!==null&&!(e.length<1))for(o=0;o<e.length;o++)if((h=ui(e[o],l,a.hoverMetaRequired),h!==null)&&!s(h,li))return h}return null}function lu(n){var r=[],t,u,f,i,o,s;if(!n||!n.bindInfos||n.bindInfos.length<1)return[];for(t=0;t<n.bindInfos.length;t++)if(u=n.bindInfos[t].tsqs,f=n.bindInfos[t].target,u&&f&&f.avbcn&&(i=n.ewct?e.querySelectorAllInShadowRoot(_d,u):_d.querySelectorAll(u),i&&i.length>0))for(o=0;o<i.length;o++)s=p(f.avbcn,i[o]),s&&s.length>0&&(r=r.concat.apply(r,s));return r}function au(){var n=[],r,t,i;for(r in u)(t=u[r],t)&&(t.autoPlayType===VRHEnums.AutoPlayType.OnVisible||t.autoPlayType===VRHEnums.AutoPlayType.OnVisibleWithAutoPlayNext)&&(i=lu(t),i&&i.length>0&&(n=n.concat.apply(n,i)));(n===null||n===void 0?void 0:n.length)>0&&(vu(n),ft=n)}function vu(n){n.sort(function(n,t){var i=sj_go(n,"Top"),u=sj_go(n,"Left"),r=sj_go(t,"Top"),f=sj_go(t,"Left");return i!==r?i-r:u-f})}function sr(n){var t,e,o,c,l;if(typeof(n===null||n===void 0?void 0:n.getBoundingClientRect)!="function"||(t=n.getBoundingClientRect(),!t||t.height<=0||t.width<=0))return 0;var i=t.top,r=t.left,u=t.height,f=t.width,s=tr(),h=ir();return s<=0||h<=0?0:(e=0,i>=0&&i+u<=h?e=u:i>=0&&i+u>h?e=h-i:i<=0&&i+u>0&&(e=i+u),o=0,r>=0&&r+f<=s?o=f:r>=0&&r+f>s?o=s-r:r<=0&&r+f>0&&(o=r+f),c=o*1/f,l=e*1/u,c>=.5&&l>=.5&&c*l>=.5?c*l:0)}function yu(n,t){var r,i;if(!t||!n)return null;if(h(n,t.tcn)){if(r=t.ttcn,!r||r.length<1)return null;i=n;do{if(i&&h(i,r))return i;i=i.parentElement}while(i&&i!=_d.body);return null}return null}function pu(n){var u,t,r,f,o;if(!n||!n.bindInfos||n.bindInfos.length<1)return null;for(u=[],t=0;t<n.bindInfos.length;t++){var s=n.bindInfos[t].tsqs,i=n.bindInfos[t].target,h={hoverMetaRequired:!!(!n.enHoverAsyncMeta&&!n.enBoundarySizeScale)};if(s&&i&&i.tcn&&i.ttcn&&(r=n.ewct?e.querySelectorAllInShadowRoot(_d,s):_d.querySelectorAll(s),r&&r.length>0))for(f=0;f<r.length;f++)o=p(i.ttcn,r[f]),o&&o.length>0&&u.push({targetInfo:i,elements:o,targetProperties:h})}return u.length>0?u:null}function hr(n){var u,t,r,f,o;if(!n||!n.bindInfos||n.bindInfos.length<1)return null;for(u=[],t=0;t<n.bindInfos.length;t++){var s=n.bindInfos[t].tsqs,i=n.bindInfos[t].target,h={hoverMetaRequired:!!(!n.enHoverAsyncMeta&&!n.enBoundarySizeScale)};if(s&&i&&i.bcn&&i.tcn&&(r=n.ewct?e.querySelectorAllInShadowRoot(_d,s):_d.querySelectorAll(s),r&&r.length>0))for(f=0;f<r.length;f++)o=p(i.bcn,r[f]),o&&o.length>0&&u.push({targetInfo:i,elements:o,targetProperties:h})}return u.length>0?u:null}function wu(n){var t,i,u,f,r,o,s;if(!n||!n.bindInfos||n.bindInfos.length<1)return null;for(t=[],i=0;i<n.bindInfos.length;i++)if(u=n.bindInfos[i].tsqs,f=n.bindInfos[i].target,u&&f&&f.marc&&(r=n.ewct?e.querySelectorAllInShadowRoot(_d,u):_d.querySelectorAll(u),r&&r.length>0))for(o=0;o<r.length;o++)s=p(f.marc,r[o]),s&&s.length>0&&(t=t.concat.apply(t,s));return t.length>0?t:null}function ui(n,t,i){var u,f,r;return(i===void 0&&(i=!1),n&&t&&(u=ei(n,l),u))?(f=t.tcn===t.bcn?n:ct(t.tcn,n),i)?(r=oi(u),!r||!r.cid)?null:r.smturl&&r.smturl!=null&&r.smturl.length>0?f:null:f:null}function bu(n){var t=Array(),c,o,f,i,s,r,e,h;for(c in u)o=u[c],o&&(f=pu(o),f!=null&&f.length>0&&(t=t.concat(f)));if(t.length<1)return null;for(i=0;i<t.length;i++)if(s=t[i].targetInfo,r=t[i].elements,s!==null&&r!==null&&!(r.length<1))for(e=0;e<r.length;e++)if(r[e]==n&&(h=ui(n,s,!1),h!==null))return h;return null}function fi(n){sj_evt.fire(n,VRHEnums.HoveredElementType.Adult);sj_evt.fire(n,VRHEnums.HoveredElementType.Algo)}function tt(n){var i,t,f,e;return n?(t=b(n),!t)?!1:(f=(i=r(t,d))!==null&&i!==void 0?i:r(t,o+d),!f)?!1:(e=u[f],!e)?!1:!!e.enHoverAsyncMeta:!1}function ku(){fi(i.HoverEnableEvt)}function du(n){var i=sj_et(n),t=bu(i);t&&(tt(t)?it(t,VRHEnums.TriggerType.TabTrigger):k(t,VRHEnums.TriggerType.TabTrigger),ut=!0)}function gu(){_d.activeElement!=null&&(_d.activeElement==sj_b||cr(_d.activeElement)?fi(i.HoverEnableEvt):(v(),fi(i.HoverDisableEvt)))}function b(n){for(var t=n,i;t!=null;){if(i=ei(t,l),i)return i;if(h(t,kt))return b(f);t=t.parentNode&&t.parentNode!=t?t.parentNode:null}return null}function ei(n,t){var i,r;if(n){if(s(n,t)===!0||s(n,o+t)===!0)return n;if(n.children&&n.children.length>0)for(i=0;i<n.children.length;i++)if(r=ei(n.children[i],t),r)return r}return null}function nf(n,t,i,r){for(var u=n,f=r.ewct?e.querySelectorAllInShadowRoot(_d,i):_d.querySelectorAll(i),o;u;){for(o=0;o<(f===null||f===void 0?void 0:f.length);o++)if(f[o]===u)return null;if(h(u,t))return u;u=u.parentElement}return null}function tf(n,t){var i=_ge(n);return i==null?null:ct(t,i)}function rf(n,t){return c(n,t,VRHEnums.HoverTargetType.Boundary)}function uf(n,t){return c(n,t,VRHEnums.HoverTargetType.Target)}function c(n,t,i){var s,h,e;if(n&&t&&(s=u[t]?u[t].bindInfos:null,s&&s.length>0))for(h=0;h<s.length;h++){var r=s[h],f=null,o=null,c=null,l=!1;switch(i){case VRHEnums.HoverTargetType.Boundary:f=r.target.bcn;break;case VRHEnums.HoverTargetType.CaptionSource:f=r.target.bcn;c=r.target.cscn;l=!0;break;case VRHEnums.HoverTargetType.Target:f=r.target.tcn;break;case VRHEnums.HoverTargetType.PlayerBoundary:f=r.target.pbcn;o=r.target.ppid;break;case VRHEnums.HoverTargetType.MMSTBoundary:f=r.target.mbcn;o=r.target.mpid;break;case VRHEnums.HoverTargetType.CaptionTarget:f=r.target.ctcn;o=r.target.tpid;break;case VRHEnums.HoverTargetType.LinkTarget:f=r.target.ltcn;o=r.target.tpid;break;case VRHEnums.HoverTargetType.ScaleCanvas:return _ge(r.target.scid);case VRHEnums.HoverTargetType.DuplicateSource:f=r.target.dscn;break;case VRHEnums.HoverTargetType.DuplicateTarget:return _ge(r.target.dtid)}if(f&&(e=null,o!=null?e=tf(o,f):(e=nf(n,f,r.tsqs,u[t]),e&&l&&(e=c!=null?ct(c,e):null)),e))return e}return null}function cr(n){return rr(kt,n)!=null}function lr(n){return typeof n===nu&&!isNaN(n)&&isFinite(n)}function ff(n,t){var i=[],u=lr(n)&&lr(t),r;if(u&&(_d.elementsFromPoint?i=_d.elementsFromPoint(n,t):_d.msElementsFromPoint&&(i=_d.msElementsFromPoint(n,t))),(i===null||i===void 0?void 0:i.length)>0)for(r=0;r<i.length;r++)if(h(i[r],kt))return!0;return!1}function oi(n){var s,f=null,i=null,h=null,c=(s=r(n,l))!==null&&s!==void 0?s:r(n,o+l),t,u;if(!c)return null;try{f=ef(n);f||(t=JSON.parse(c),u=e.getMediaMetadataObject(n),i=t.capt,i&&(h={de:i.de,filterUrlFormat:null,pu:i.pu,puid:i.puid,pud:i.pud,r:i.r,s:i.s,sk:i.sk,t:t.vt,vc:i.vc,actkeylst:i.actkeylst,actpayload:i.actpayload,saved:i.saved,du:t.du,mid:t.mid,creatorName:i.crtname,creatorId:i.crtid,creatorAvatar:i.crtaurl}),f={ma:!!(t.bv&2),at:!!(t.bv&4),capt:h,cc:t.cc,cid:t.cid,ct:t.ct,du:t.du,md5:t.md5||u.md5,mid:t.mid||u.mid,mmsturl:t.mmsturl,paid:!!(t.bv&1),purl:t.purl||u.ourl,smturl:t.smturl,thid:t.thid,vt:t.vt,bci:t.bci,murl:t.murl||u.ourl,sab:!!(t.bv&8),pgurl:t.pgurl||u.ourl,q:t.q,el:!!(t.bv&16),reid:t.reid})}catch(a){f=null}return f}function ef(n){var s,h,c,a,v,y,p,i=(s=r(n,d))!==null&&s!==void 0?s:r(n,o+d),b=(h=r(n,l))!==null&&h!==void 0?h:r(n,o+l),f,e,t,w;return!i||!b?null:(f=u[i],!f)?null:(e=(a=(c=r(n,"mid"))!==null&&c!==void 0?c:r(n,o+"mid"))===null||a===void 0?void 0:a.toUpperCase(),!e)?null:(t=JSON.parse(b),!t)?null:(w=!!((v=r(n,vi))!==null&&v!==void 0?v:r(n,o+vi)),e===((y=t.videoId)===null||y===void 0?void 0:y.toUpperCase())||pt&&t.videoId)?hf(t,f,i,w):e===((p=t.mid)===null||p===void 0?void 0:p.toUpperCase())||pt&&t.mid?sf(t,f,i,w):null}function sf(n,t,i,r){var u=n.capt,f;return u&&(f={de:u.de,filterUrlFormat:null,pu:u.pu,puid:u.puid,pud:u.pud,r:u.r,s:u.s,sk:u.sk,t:n.vt,vc:u.vc,actkeylst:u.actkeylst,actpayload:u.actpayload,saved:u.saved,du:n.du,mid:n.mid,creatorName:u.crtname,creatorId:u.crtid,creatorAvatar:u.crtaurl}),{ma:!!n.ma,at:!!n.at,capt:f,cc:n.cc,cid:i,ct:n.ct,du:n.du,md5:n.md5,mid:n.mid,mmsturl:n.mmsturl,paid:!!n.paid,purl:n.purl,smturl:n.smturl,thid:n.thid,vt:n.vt,bci:n.bci,murl:n.murl,sab:r,pgurl:n.pgurl,q:n.q,el:t.enLoopPlay,reid:n.reid}}function hf(n,t,i,r){var f,o,s,h,c,l,a,v,y,u=(f=n.publisher)===null||f===void 0?void 0:f[0],p={de:n.description,filterUrlFormat:null,pu:u===null||u===void 0?void 0:u.name,puid:u===null||u===void 0?void 0:u.name,pud:n.datePublished,r:null,s:null,sk:null,t:n.name,vc:(o=n.viewCount)===null||o===void 0?void 0:o.toString(),actkeylst:null,actpayload:null,saved:!1,du:n.duration,mid:n.videoId,creatorName:(h=(s=n.followableTargetObject)===null||s===void 0?void 0:s.creator)===null||h===void 0?void 0:h.name,creatorId:(l=(c=n.followableTargetObject)===null||c===void 0?void 0:c.creator)===null||l===void 0?void 0:l.id,creatorAvatar:(y=(v=(a=n.followableTargetObject)===null||a===void 0?void 0:a.creator)===null||v===void 0?void 0:v.image)===null||y===void 0?void 0:y.thumbnailUrl};return{ma:!!n.isAdult,at:!!n.isAdult,capt:p,cc:e.getClipsCountFromVideoResult(n),cid:i,ct:e.getClipsTimelineFromVideoResult(n),du:n.duration,md5:n.videoId,mid:n.videoId,mmsturl:e.getThumbnailUrlFromVideoResult(n,"MultiMotionStatic",n.isAdult,t.pid),paid:!!!n.isAccessibleForFree,purl:n.hostPageUrl,smturl:e.getThumbnailUrlFromVideoResult(n,"MultiMotion",n.isAdult,t.pid),thid:e.getThumbnailIdFromVideoResult(n,"Large"),vt:n.name,bci:0,murl:n.contentUrl,sab:r,pgurl:n.hostPageUrl,q:nr("q"),el:t.enLoopPlay,reid:null}}function cf(n){var t=sj_et(n);st=t;sb_st(function(){st=null},500)}function lf(n){lt=n;var t=sj_et(n);t&&vt(t,null,null)}function af(n){if(ii){lt=n;var t=sj_et(n);st!=t&&(tt(t)?it(t,VRHEnums.TriggerType.MouseTrigger):k(t,VRHEnums.TriggerType.MouseTrigger),ut=!0)}}function vf(n){if((n===null||n===void 0?void 0:n.length)>1){var t=n[1];tt(t)?it(t,VRHEnums.TriggerType.ManualTrigger):k(t,VRHEnums.TriggerType.ManualTrigger)}}function yf(n){lt=n;var t=sj_et(n);st!=t&&(tt(t)?it(t,VRHEnums.TriggerType.HoverLoopPlayTrigger):k(t,VRHEnums.TriggerType.HoverLoopPlayTrigger),ut=!0)}function it(n,t){if(n){var i=b(n);i&&(gt(i,rt),vt(n,t,k))}}function k(n,t,i){var l,e,a,o,h,y,p,it,k,nt;if(i===void 0&&(i=-1),!gr(n)){if(t!==VRHEnums.TriggerType.VisibleAutoPlayTrigger&&(w=null),l=b(n),!l){f&&v();return}if((e=oi(l),e&&e.cid)&&(a=uf(n,e.cid),a!==f&&a!=null)&&(s(a,et)||(f=a),o=parseInt(r(l,"ht")),o||(o=0),!(o>=0)||!(o<g.length)||g[o]!==!1)&&(h=rf(n,e.cid),h)){var d=c(n,e.cid,VRHEnums.HoverTargetType.PlayerBoundary),ft=c(n,e.cid,VRHEnums.HoverTargetType.MMSTBoundary),ot=c(n,e.cid,VRHEnums.HoverTargetType.CaptionSource),st=c(n,e.cid,VRHEnums.HoverTargetType.CaptionTarget),ht=c(n,e.cid,VRHEnums.HoverTargetType.LinkTarget),ct=c(n,e.cid,VRHEnums.HoverTargetType.ScaleCanvas),at=c(n,e.cid,VRHEnums.HoverTargetType.DuplicateSource),vt=c(n,e.cid,VRHEnums.HoverTargetType.DuplicateTarget),tt=null;if(d!=null&&(y=d.getElementsByClassName(tu),y&&y.length>0&&(p=y[0].getElementsByTagName("img"),p&&p.length>0&&(tt=p[0]))),it=e.cid?u[e.cid]:null,k=ee(h,it),k){var yt=k.clientHeight,pt=k.clientWidth,rt=h.clientWidth,ut=h.clientHeight;e.capt&&e.capt.sk&&(e.capt.sk=wf(h));nt={containerId:e.cid,containerHeight:ut,containerWidth:rt,hoverType:o,thumbnailHeight:Math.min(ut,yt),thumbnailWidth:Math.min(rt,pt),videoRichHoverMetaData:e,instMetaData:null,hoveredElement:h,triggerType:t,playerTargetEl:d,mmstTargetEl:ft,captionSourceEl:ot,captionTargetEl:st,linkTargetEl:ht,playerThumbnailEl:tt,scaledCanvasEl:ct,duplicateSourceEl:at,duplicateTargetEl:vt,hoverDelayMsOverwrite:i,mouseEvent:lt};ti&&(dt=ti(l,o,e.cid),nt.instMetaData=dt);sj_evt.fire(bi,nt,h,pf(e))}}}}function pf(n){if(!n)return null;var t=VRHEnums.ThumbnailType.ST;return n.mmsturl&&n.smturl&&n.cc>0?t=VRHEnums.ThumbnailType.MMMT:n.smturl&&(t=VRHEnums.ThumbnailType.MT),t}function wf(n){var t,u,f,e,i,r;if(!n)return null;if(t=p("rms_img",n),u=[],t&&t.length>0){for(f=0;f<t.length;f++)if(e=di(t[f]),i=e.split(" "),i)for(r=0;r<i.length;r++)i[r].match("rms_rmsanswers")&&u.push(i[r]);if(u.length>0)return u.join(" ")}return null}function ar(){f!==null&&(f=null,dt=null)}function vr(n){var t,i;ff(n.clientX,n.clientY)||(t=b(sj_et(n)),t&&h(t,rt)&&ni(t,rt),f&&!s(f,bt))&&(i=yr(sj_mo(n)),i!==yr(f)&&f&&v())}function yr(n){var r,e,t,i;return typeof u==y||!u?null:(cr(n)&&(n=f),r=b(n),e=null,r&&(t=oi(r),t&&(i=u[t.cid],typeof i!=y&&i&&(e=c(n,t.cid,i.hmot)))),e)}function v(){f&&s(f,et)||(nt&&ie(),sj_evt.fire(i.HoverCancelEvt),ar())}function bf(n){n&&n.length>1?vr(n[1]):f&&v()}function kf(n,t,i){for(var r=n,u=null,f,e;r!=null;){if(u=pr(r),u)break;r=r.parentNode&&r.parentNode!=r?r.parentNode:null}if(!u&&n)for(f=n.getElementsByTagName("a"),e=0;e<(f===null||f===void 0?void 0:f.length);e++)if(u=pr(f[e]),u)break;return u?__assign(__assign({},u),{HoverType:t,HoverContainerId:i}):null}function pr(n){var t,i,u,f,e;return n?(t="h",i="data-h",(s(n,t)||s(n,i))&&(u=r(n,t)||r(n,i),u&&(f=u.match(/ID=[\w]+(\.[\w]+)*(\.[\d]+_[\d]+)*,[\d]+(\.[\d]+)*/),f)))?(e=f[0].substr(3).split(","),{AppNS:e[0],K:e[1]}):null:null}function df(n){if(n&&!(n.length<2)){var t=parseInt(n[1]);t<g.length&&t>=0&&(g[t]=!0)}}function gf(n){if(n&&!(n.length<2)){var t=parseInt(n[1]);t<g.length&&t>=0&&(g[t]=!1)}}function ne(){si(!0)}function wr(){si(!1)}function si(n){if(!ut&&!nt){nt=!0;var t=cu(n);tt(t)?it(t,VRHEnums.TriggerType.AutoplayTrigger):k(t,VRHEnums.TriggerType.AutoplayTrigger)}}function br(n){tt(n)?it(n,VRHEnums.TriggerType.VisibleAutoPlayTrigger):k(n,VRHEnums.TriggerType.VisibleAutoPlayTrigger);w=ri?hi(n):null}function kr(){if(w=null,sr(f)<i.AutoPlayVisibilityThreshold){v();var n=hi();n!==null&&br(n);return}ri&&(w=hi(f))}function hi(n){var u,r,t;if(!ft)return null;for(u=-1,n&&(u=ft.indexOf(n)),r=u+1;r<ft.length;r++)if(t=ft[r],t&&!gr(t)&&sr(t)>i.AutoPlayVisibilityThreshold)return t;return null}function dr(){nt&&(v(),si(!1))}function ci(){w&&br(w)}function te(n){if(n&&!(n.length<2)){var t=n[1];t?(sj_evt.bind(i.AutoPlayNext,wr),sj_evt.bind(i.FallbackToNonSMTEvt,dr)):(sj_evt.unbind(i.AutoPlayNext,wr),sj_evt.unbind(i.FallbackToNonSMTEvt,dr))}}function ie(){f!==null&&f.setAttribute(li,null);nt=!1}function re(){nt=!1;ut=!1}function ue(n){switch(n.key){case"Esc":case"Escape":v();ii=!1}}function fe(){ii=!0}function gr(n){var t,r;if(n instanceof Node)for(t=p(i.HoverDisabledClassName),r=0;r<(t===null||t===void 0?void 0:t.length);r++)if(t[r].contains(n))return!0;return!1}function ee(n,t){var r,u,i,f;return n?(i=(r=t===null||t===void 0?void 0:t.bindInfos)===null||r===void 0?void 0:r.find(function(t){var i=(t===null||t===void 0?void 0:t.tsqs)?Array.from(_d.querySelectorAll(t.tsqs)):null;if(i!==null&&i!==void 0)return i.some(function(t){return t.contains(n)})}),f=(u=i===null||i===void 0?void 0:i.target)===null||u===void 0?void 0:u.treqs,f?n.querySelector(f):oe(n)):null}function oe(n){var t=n===null||n===void 0?void 0:n.getElementsByTagName("img");return t&&t.length>0?t[0]:null}function se(n){var i,r,u,t,f;if(!n||!n.bindInfos||n.bindInfos.length<1)return null;for(i=[],r=0;r<n.bindInfos.length;r++)if(u=n.bindInfos[r].tsqs,u&&(t=n.ewct?e.querySelectorAllInShadowRoot(_d,u):_d.querySelectorAll(u),t&&t.length>0))for(f=0;f<t.length;f++)i.push(t[f]);return i.length>0?i:null}function he(){t&&t.ha&&t.gebc&&t.ga&&t.sa&&t.hc&&t.ac&&t.rc&&t.sf&&t.qsv&&t.gaebc&&t.gfbc&&t.tsu&&t.gcw&&t.gch&&e&&i&&yt&&yt.bind&&(s=t.ha,p=t.gebc,r=t.ga,ht=t.sa,h=t.hc,di=t.gcn,gt=t.ac,ni=t.rc,gi=t.sf,nr=t.qsv,rr=t.gaebc,ct=t.gfbc,ur=t.tsu,tr=t.gcw,ir=t.gch,a=yt.bind,pi=i.HoverDisableEvt,yi=i.HoverEnableEvt,bi=i.HoverMouseInEvt,wi=i.HoverStopEvt,ti=kf,ki=i.HoverAsyncBindEvt,f=null,sj_evt.bind(i.PlayerEndEvt,v),sj_evt.bind(i.HoverCleanupEvt,ar),sj_evt.bind(i.AutoPlayNextStatusUpdateEvt,te),sj_evt.bind(wi,bf),sj_evt.bind(yi,df),sj_evt.bind(pi,gf),sj_evt.bind(i.AutoPlayReset,re),sj_be(_d,"keydown",ue),fr=!0)}var y="undefined",nu="number",t=typeof pMMUtils!=y?pMMUtils:null,e=typeof VideoRichHoverUtils!=y?VideoRichHoverUtils:null,yt=typeof SmartEvent!=y?SmartEvent:null,i=typeof VRHConsts!=y?VRHConsts:null,pt=typeof VideoRichHoverTestUtils!=y,wt="vrhatt",bt="hapatt",et="bpatt",li="apEnd",l="vrhm",kt="vrhc",tu="cico",d="hcid",ai="rt",ot="retrieved",vi="sab",rt="onhov",o="data-",iu=_G.P+".vrh.",f=null,st=null,dt=null,yi=null,pi=null,wi=null,bi=null,ki=null,g=[!0,!0],s=null,r=null,ht=null,p=null,h=null,di=null,gt=null,ni=null,gi=null,nr=null,a=null,tr=null,ir=null,ct=null,rr=null,ur=null,ti,fr=!1,u={},er=!1,ut=!1,ii=!0,nt=!1,ru=0,lt=null,w=null,ri=!1,ft=[];n.init=uu;he()}(VideoRichHoverHandler||(VideoRichHoverHandler={}));typeof VideoRichHoverUtils!="undefined"&&typeof VideoRichHoverUtils.logJsModuleLoad=="function"&&VideoRichHoverUtils.logJsModuleLoad("VRH",!!_w.VideoRichHover),function(n){function dr(){u&&t&&vt&&li&&!ai&&(et=li.bind,it=u.ga,dt=u.ha,v=u.sa,gt=u.gcn,kr=u.sc,k=u.hc,ni=u.sp,ti=u.goh,ot=u.gow,vi=u.go,y=u.gfbc,yi=u.gaebc,wi=u.sw,bi=u.sl,c=u.ac,l=u.rc,ht=vt.updateTargetBySource,ii=vt.showElement,pi=vt.getOffsetWithScroll,nu(),ai=!0,sj_evt.fire(t.HoverReadyEvt))}function gr(n,t){!n||!t||t.length<1||!n.bindInfos||n.bindInfos.length<1||((a===null||a===void 0?void 0:a.ejii)&&typeof Log!=e&&Log.Log("Init","VRH","VRH.Init",!1,"ccid",t,"ecid",Object.keys(g).toString()),g[t]||(g[t]=n),(n.enhoverhb||n.enmmstinst||n.enperfinst)&&typeof VideoRichHoverInst!="undefined"&&VideoRichHoverInst&&VideoRichHoverInst.init&&VideoRichHoverInst.init(t,n),typeof VideoRichHoverHandler!=e&&VideoRichHoverHandler.init&&VideoRichHoverHandler.init(t,n))}function nu(){sj_evt.bind(t.HoverMouseInEvt,ur);sj_evt.bind(t.PlayerLoadEvt,di);sj_evt.bind(t.PlayerStartEvt,gi);sj_evt.bind(t.PlayerDownloadEndEvt,nr);sj_evt.bind(t.FallbackToNonSMTEvt,tr);sj_evt.bind(t.PlayerEndEvt,wt);sj_evt.bind(t.PlayerErrEvt,wt);sj_evt.bind(t.HoverCancelEvt,rr);sj_evt.bind(t.HoverMMSTShowEvt,or);sj_evt.bind(t.HoverMMSTHideEvt,ui);sj_evt.bind(t.Hover5SEvt,sr);sj_evt.bind(t.UnloadHover,ki)}function ki(){sj_evt.unbind(t.HoverMouseInEvt,ur);sj_evt.unbind(t.PlayerLoadEvt,di);sj_evt.unbind(t.PlayerStartEvt,gi);sj_evt.unbind(t.PlayerDownloadEndEvt,nr);sj_evt.unbind(t.FallbackToNonSMTEvt,tr);sj_evt.unbind(t.PlayerEndEvt,wt);sj_evt.unbind(t.PlayerErrEvt,wt);sj_evt.unbind(t.HoverCancelEvt,rr);sj_evt.unbind(t.HoverMMSTShowEvt,or);sj_evt.unbind(t.HoverMMSTHideEvt,ui);sj_evt.unbind(t.Hover5SEvt,sr);sj_evt.unbind(t.UnloadHover,ki)}function pt(n){return n&&n.length>2&&n[2]===at}function di(){}function gi(n){pt(n)&&sj_evt.fire(t.CaptionHideEvt,n[1])}function nr(n){pt(n)&&i&&(typeof Log!="undefined"&&Log.LogFilterFlare&&Log.LogFilterFlare(["qtag-vhover"]),c(i,"hvpv"))}function tr(n){pt(n)&&i&&(l(i,"hvpv"),l(i,"nhvpv"));i&&n.length>0&&n[0]==VRHConsts.FallbackToNonSMTEvt&&(typeof Log!="undefined"&&Log.LogFilterFlare&&Log.LogFilterFlare(["qtag-vhover"]),c(i,"nhvpv"))}function wt(n){pt(n)&&(ut(),sj_evt.fire(t.AutoPlayNext))}function tu(n,t){for(var i=n;i;){if(i.offsetParent===t)return t;i=i.offsetParent}return t?t.offsetParent:null}function ir(n){var t,i;if(n)for(t=0;t<n.length;t++)if(n[t]&&n[t].id&&(i=_ge(n[t].id),i))return i;return null}function iu(n,u){if(n&&u&&(i=sj_ce("div",null,"vrhcd"),i)){i.setAttribute("data-priority","2");i.setAttribute("data-hctid",n.containerId);var f=null;switch(u.interactionType){case VRHEnums.HoverInteractionType.MouseFollow:case VRHEnums.HoverInteractionType.PopOut:f=sj_b;break;case VRHEnums.HoverInteractionType.Inline:f=r}f&&(er(),f.appendChild(i),sj_evt.fire(t.HoverContainerReadyEvt,i,n))}}function ru(n){var pt,wt,a,l,pi,ot,ti,u,st,wi,bi,ki,ut,di,ct,vt,tt,rt,ui,yt;if(n&&(a=n.containerId,l=g[a],l)){if(l.dhc){iu(n,l);return}if(l.chflturl&&n&&n.videoRichHoverMetaData&&n.videoRichHoverMetaData.capt&&(n.videoRichHoverMetaData.capt.filterUrlFormat=l.chflturl),l.tw&&(n.containerWidth=n.thumbnailWidth=l.tw),l.th&&(n.containerHeight=n.thumbnailHeight=l.th),p=l.ewct?(pt=VideoRichHoverUtils.querySelectorAllInShadowRoot(_d,"[".concat(t.HoverContainerTemplateIdAttribute,'="').concat(a,'"]')))===null||pt===void 0?void 0:pt[0]:_qs("[".concat(t.HoverContainerTemplateIdAttribute,'="').concat(a,'"]')),p&&p.attributes){var bt=l.interactionType===VRHEnums.HoverInteractionType.Inline,nt=bt?n.containerWidth:n.thumbnailWidth,gi=bt?n.containerHeight:n.thumbnailHeight;h=n.playerTargetEl;var ft=n.mmstTargetEl,k=n.captionTargetEl,li=h!=null?h.clientWidth:nt,nr=h!=null?h.clientHeight:n.thumbnailHeight,ai=ft!=null?ft.clientWidth:nt,vi=k!=null?k.clientWidth:nt,tr=gt(p),rr=tr.replace(" hide",""),yi=fu(n.hoveredElement,l),ni=eu(yi);if((i=sj_ce("div",null,rr),i)&&(pi=["class","data-tag","data-priority"],pi.forEach(function(n){return dt(p,n)?v(i,n,it(p,n)):null}),ot=i,ni&&(i.appendChild(ni),ot=ni),ti=p.content,ti?ot.appendChild(ti.cloneNode(!0)):ht(ot,p,l.encc),sj_evt.fire(t.HoverContainerReadyEvt,i,n),d=n.instMetaData,u=n.videoRichHoverMetaData,st=0,typeof CaptionContainer!=e&&CaptionContainer.init&&CaptionContainer.init(a,i,vi,!0,u.capt,n.instMetaData,n.hoveredElement,l.ehm,at),wi={containerWidth:ai,thumbCnt:u.cc,mmstUrl:u.mmsturl,isAdultThumb:u.at,videoTitle:u.vt},typeof MultiMotionStaticThumbnail!=e&&MultiMotionStaticThumbnail.init&&(MultiMotionStaticThumbnail.init(a,i,wi,l,n.instMetaData),st=MultiMotionStaticThumbnail.clientHeight(a)),bi=br?VideoRichHoverTestUtils.getMockedClipsTimeline(u.ct,u.cc):u.ct,ki={videoUrl:u.purl,mediaUrl:u.murl,thid:u.thid,smtThumbUrl:u.smturl,videoHash:u.md5,thumbnailHeight:nr,thumbnailWidth:li,isMediaAdult:u.ma,isAdultThumb:u.at,isDebug:!0,isPaidContent:u.paid,expandable:!0,playClipsCount:g[a].mmstcnt,clipsCount:u.cc,clipsTimeline:bi,updatePlayProgress:!0,imageThumbUrl:null,videoTitle:u.vt,cookiePre:l.cookiePre,beginClipIndex:u.bci>0?u.bci:0,endClipIndex:l.pcc>0&&u.bci>0?u.bci+l.pcc-1:0,mediaId:u.mid,isSaveable:u.sab,pageoUrl:u.pgurl,query:u.q,enableLoop:u.el,playerEndAction:l.pea,enablePlayerFitCover:l.enpfc,eventHandlerMap:l.ehm},typeof ThumbnailPlayer!=e&&ThumbnailPlayer.init&&(ThumbnailPlayer.init(a,nt,n.hoverType,l,i,at,ki,n.instMetaData),st+=ThumbnailPlayer.clientHeight(a)),typeof IframeContainer!=e&&IframeContainer.init&&IframeContainer.init(a,i,f,u.q,u.mid,yi,at,d),ut=null,bt?(ut=r,di=k!=null?k.clientHeight:Math.max(0,gi-st),sj_evt.fire(t.HoverCaptionHUpdateEvt,di)):(ct=ir(f.boundaryElIds),ct||(ct=_d.body),ut=ct),ut)){if(((wt=f.attachInfos)===null||wt===void 0?void 0:wt.length)>0)for(vt=0;vt<f.attachInfos.length;vt++)tt=f.attachInfos[vt],tt&&tt.scn&&tt.dpcn&&r&&(rt=y(tt.scn,i),ui=y(tt.dpcn,r),rt&&ui&&(v(rt,"data-priority","2"),ui.appendChild(rt),b.push(rt),ii(rt,!0)));h&&(o=y(oi,i),o&&(c(o,"outer_pc"),lt(h,o,oi,li),sj_evt.fire(t.OverlaySizeUpdateEvt,nt,n.thumbnailHeight)));ft&&(s=y(si,i),s&&lt(ft,s,si,ai));k&&(n.captionSourceEl!=null?l.isCaptionReplaced?ht(k,n.captionSourceEl,l.encc):(yt=sj_ce("div",null,ci),ht(yt,n.captionSourceEl,l.encc),lt(k,yt,ci,0),fr(yt)):(w=y(hi,i),w&&lt(k,w,hi,vi)));lt(ut,i,ei,l.enDynamicWidth?0:nt);hu(n.duplicateSourceEl,n.duplicateTargetEl);er();switch(f.interactionType){case VRHEnums.HoverInteractionType.MouseFollow:fi(n.mouseEvent);sj_be(_d,"mousemove",fi);break;case VRHEnums.HoverInteractionType.PopOut:if(!tf(r,i,l)){sj_evt.fire(t.HoverCancelEvt);return}}kt=y(ar,i);kt&&et(kt,lr,uu);ri(i);ri(o);ri(s);sj_evt.fire(t.HoverContainerDisplayEvt)}}}}function uu(){sj_evt.fire(t.HoverViewPortUpdateEvt)}function lt(n,t,i,r){var u=n.firstChild;u&&k(u,i)&&u.parentNode==n&&(n.removeChild(u),u=n.firstElementChild);n.insertBefore(t,u);r>0&&wi(t,r);ii(t,!0)}function ri(n){n!=null&&(sj_evt.fire("focusChange",n),et(n,"mouseout",au),et(n,"click",yu),ct.triggerType==VRHEnums.TriggerType.TabTrigger&&et(n,"focusout",ou))}function fu(n,t){var u,f,e,i,r;if(!t||!n||!t.bindInfos||t.bindInfos.length<1)return null;for(u=0;u<t.bindInfos.length;u++)if(f=t.bindInfos[u],k(n,f.target.bcn)&&(e=f.target.tacn,i=hr(n),i&&i.length>0))for(r=0;r<i.length;r++)if(k(i[r],e))return i[r];return null}function eu(n){var t,i,r,u;return n&&n.href?(t=sj_ce("a",null,"hover-anchor"),t.href=n.href,n.target&&(t.target=n.target),i=it(n,"h"),i&&v(t,"h",i),r=it(n,"aria-label"),r&&v(t,"aria-label",r),u=it(n,"data-emburl"),u&&(v(t,"data-emburl",u),t.onclick=n.onclick),t):null}function ou(n){n&&_d&&_d.activeElement&&sb_st(function(){var n=_d.activeElement;if(!du(n)&&(!n||!dt(n,t.TabHoverBehaviorAttachedStr))&&!bt(n)){sj_evt.fire(t.HoverStopEvt);return}},10)}function rr(){st===!0?((a===null||a===void 0?void 0:a.ehslf)&&(yt>=0&&(sb_ct(yt),yt=-1),st=!1),rt||(rt=function(){sj_evt.fire(VRHConsts.StopPlayEvt,d);ut();sj_evt.fire(VRHConsts.HoverCleanupEvt)})):(sj_evt.fire(VRHConsts.StopPlayEvt,d),ut());sj_evt.fire(VRHConsts.HoverCleanupEvt)}function su(n){while(n){if(n.tagName=="a"||n.tagName=="A")return!0;n=n.parentNode&&n.parentNode!=n?n.parentNode:null}return!1}function ur(n){var u,i,o,s;if(n&&n.length>2){if(u=n[2],i=n[1],!i||!i.containerHeight||!i.containerWidth||!i.videoRichHoverMetaData)return;if(st===!0){sj_evt.fire(VRHConsts.HoverCleanupEvt);return}if(u&&u!==r)lu(i),r==null||r.hasAttribute(yr)||(sj_evt.fire(VRHConsts.StopPlayEvt,d),ut()),r=u,ct=i,tt=i.scaledCanvasEl;else return;if(o=g[i.containerId],!o)return;f=o;st=!0;rt=null;ft!=null&&r.hasAttribute(t.BoundarySizePersistedAttachedStr)&&r!=ft&&(l(ft,nt),ft=null,tt&&l(tt,nt));r.hasAttribute(t.BoundarySizeScaleAttachedStr)&&(c(r,nt),tt&&c(tt,nt));s=i.hoverDelayMsOverwrite!=null&&!isNaN(i.hoverDelayMsOverwrite)&&i.hoverDelayMsOverwrite>=0?i.hoverDelayMsOverwrite:o.hoverdelayms;yt=sb_st(function(){sj_evt.fire(t.HoverStartEvt,i.instMetaData,i.triggerType,u);sj_evt.fire(t.AutoPlayNextStatusUpdateEvt,!!(i.triggerType===VRHEnums.TriggerType.AutoplayTrigger&&o.enAutoPlayNext));_w!==_w.parent&&typeof MMMessenger!=e&&MMMessenger.Post(_w.parent,VRHEnums.IframeMessage.PreviewStarted,null);ru(i);rt&&(rt(),rt=null);st=!1},s);cu(i)}}function hu(n,t){var i,u,e;if(n!=null&&t!=null){var s=gt(n),o=s.split(" "),r=t;for(i=0;i<o.length;i++)if(u=y(o[i],t),u){r=u;break}ht(r,n,f===null||f===void 0?void 0:f.encc);e=y(vr,r);e&&fr(e)}}function cu(n){var i=n.videoRichHoverMetaData,t;i!=null&&(t=n.linkTargetEl,t!=null&&(v(t,"href",i.purl),v(t,"aria-label",i.vt)))}function fr(n){if(r&&r.parentElement&&r.hasAttribute(t.BoundarySizeScaleAttachedStr)){var o=r.parentElement,u=vi(r)[0],f=ot(r),s=ot(o),e=yi("scrollbar",r),i=e!=null?u-e.scrollLeft:u;i<s-i-f&&bi(n,i+f+pr)}}function lu(n){var e=n.containerId,u=g[e],t,r,i;if(u!=null&&(t=n.videoRichHoverMetaData,t!=null)&&(r=n.playerThumbnailEl,i=n.playerTargetEl,r!=null&&i!=null)){var o=t.thid,s=t.at,h=i.clientWidth,c=i.clientHeight,l=u.pid,f=ThUrlGenerator.NewThumbnailUrl(o,s,h,c,l,ThUrlGenerator.CroppingType.SmartRatio,ThUrlGenerator.ResizeMode.Ratio);f!=null&&v(r,"src",f)}}function au(n){bt(sj_mo(n))||sj_evt.fire(t.HoverStopEvt,n)}function er(){r&&c(r,"onhov");h&&c(h,"onhov")}function vu(){r&&(l(r,"onhov"),r.hasAttribute(t.BoundarySizePersistedAttachedStr)?ft=r:r.hasAttribute(t.BoundarySizeScaleAttachedStr)&&(l(r,nt),l(tt,nt)));h&&l(h,"onhov")}function or(){r&&c(r,"mmsts")}function ui(){r&&l(r,"mmsts")}function sr(n){var u=n&&n[0],r=t.EventNameToHoverConatinerClassName[u];r&&i&&c(i,r)}function yu(n){if(r&&cr()&&ct){var t=sj_et(n);su(t)?pu(n):wu(n)}}function pu(){(a===null||a===void 0?void 0:a.shoac)&&ut()}function wu(n){var c=sj_et(n),h,u,o,i,s;if(bt(c)&&f&&!(f.ic<=0)&&((new Image).src=_G.gpUrl+"IG="+_G.IG+"&"+it(r,"h"),h=ct.hoverType,u=!1,h===VRHEnums.HoveredElementType.Adult?(typeof AnsSSDlg!=e&&typeof AnsSSDlg.sw=="function"&&AnsSSDlg.sw(n,"vdo_ans_ss_dlg"),u=!0):n.ctrlKey||n.button==1||(o=bu(r,f?f.bindInfos:null),i=ku(o),i&&(s=document.createEvent("MouseEvents"),s.initMouseEvent("click",!0,!0,_w,0,0,0,0,0,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,i),i.dispatchEvent(s),typeof si_ct=="function"&&si_ct(i)),i===o&&sj_evt.fire(t.HoverClickedEvt,r),u=!0),sj_evt.fire(t.HoverDisableEvt,VRHEnums.HoveredElementType.Algo),ut(),u)){sj_pd(n);sj_sp(n);return}}function bu(n,t){var r;if(n&&t)for(r=0;r<t.length;r++){for(var u=t[r],f=u.target,i=n;i&&!k(i,f.bcn);)i=i.parentElement;if(i)return i}return null}function hr(n){return n?n.getElementsByTagName("a"):null}function ku(n){var i=hr(n),t;if(i)for(t=0;t<i.length;t++)if(!bt(i[t]))return i[t];return n}function bt(n){while(n!=null){if(k(n,ei))return!0;n=n.parentNode&&n.parentNode!=n?n.parentNode:null}return!1}function du(n){while(n!=null){if(k(n,wr))return!0;n=n.parentNode&&n.parentNode!=n?n.parentNode:null}return!1}function cr(){return i!=null||o!=null||s!=null}function ut(){ui();vu();cr()&&(gu(),nf(),sj_evt.fire(VRHConsts.HoverMouseOutEvt,d));sj_ue(_d,"mousemove",fi);d=null;r=null;ct=null}function gu(){var n=null,r,t;if(i!=null&&i.parentElement!=null&&(n=i.parentElement,n.removeChild(i)),o!=null&&o.parentElement!=null&&(n=o.parentElement,n.removeChild(o)),s!=null&&s.parentElement!=null&&(n=s.parentElement,n.removeChild(s)),w!=null&&w.parentElement!=null&&(n=w.parentElement,n.removeChild(w)),(b===null||b===void 0?void 0:b.length)>0)for(r=0;r<b.length;r++)t=b[r],(t===null||t===void 0?void 0:t.parentElement)&&(n=t.parentElement,n.removeChild(t));return b=[],n!=null}function nf(){f.encc!==!0&&(i!=null&&(i.innerHTML=null),o!=null&&(o.innerHTML=null),s!=null&&(s.innerHTML=null));i=null;o=null;s=null}function fi(n){if(i&&n){var t=rf(n.clientX,n.clientY);ni(i,t.l,t.t)}}function tf(n,t,i){var r=uf(t,n,i);return r?(ni(t,r.l,r.t),!0):!1}function rf(n,t){var r=n+VRHConsts.MouseRightMargin,u=t+VRHConsts.MouseBottomMargin,f=sb_de.clientWidth,s=sb_de.clientHeight,e=i.clientWidth,o=i.clientHeight,h=r+e>f,c=u+o>s;return h&&c?(r=f-e,u=t-o-VRHConsts.MouseTopMargin):h?r=f-e:c&&(u=s-o),{l:r,t:u}}function uf(n,t,i){var o,c,l;if(!i||!n||!t||(o=tu(t,ir(f.boundaryElIds)),!o))return null;var e=ff(o,i),a=pi(t,o,f.sd),r=a[0],u=a[1],s=ot(t),h=ti(t);if(e.l>r+s/2||e.t>u+h/2||e.r<r+s/2||e.b<u+h/2)return null;c=ot(n);l=ti(n);r-=(c-s)/2;r=Math.ceil(r);r=Math.min(r,e.r-c-2);r=Math.max(r,e.l);switch(i.va){case VRHEnums.HoverVerticalAlignType.Top:break;case VRHEnums.HoverVerticalAlignType.Middle:default:u-=(l-h)/2}return u=Math.floor(u),u=Math.min(u,e.b-l-2),u=Math.max(u,e.t),{l:r,t:u}}function ff(n,t){var i,r;if(!n)return{l:0,t:0,r:0,b:0};i={l:0,t:0,r:n.clientWidth,b:n.clientHeight};switch(t===null||t===void 0?void 0:t.obt){case VRHEnums.OffsetBoundaryType.Content:if(r=_w.getComputedStyle(n),r){var u=parseFloat(r.paddingTop),f=parseFloat(r.paddingRight),e=parseFloat(r.paddingBottom),o=parseFloat(r.paddingLeft);i.l+=isNaN(o)?0:o;i.t+=isNaN(u)?0:u;i.r-=isNaN(f)?0:f;i.b-=isNaN(e)?0:e}}return i}var lr="scroll",at="VRTP",ei="vrhc",ar="hover-anchor",oi="vrhtpc",si="vhcic",hi="vrhcs",ci="vrhcac",vr="mc_vtvc_meta_w",yr="bpatt",nt="scale",e="undefined",pr=16,wr="fbdialog",u=typeof pMMUtils!=e?pMMUtils:null,li=typeof SmartEvent!=e?SmartEvent:null,vt=typeof VideoRichHoverUtils!=e?VideoRichHoverUtils:null,br=typeof VideoRichHoverTestUtils!=e,t=typeof VRHConsts!=e?VRHConsts:null,a=typeof vrhgc!=e?vrhgc:null,p=null,i=null,kt=null,r=null,o=null,s=null,w=null,h=null,ft=null,tt=null,b=[],ai=!1,et=null,kr=null,it=null,dt=null,v=null,gt=null,ni=null,ot=null,ti=null,vi=null,y=null,yi=null,k=null,ii=null,pi=null,wi=null,bi=null,st=!1,yt=-1,c=null,l=null,ht=null,f=null,ct,d=null,g={},rt;n.init=gr;dr()}(VideoRichHover||(VideoRichHover={}))